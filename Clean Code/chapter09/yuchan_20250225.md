# Clean Code Chapter 09. 단위 테스트

## 좋은 단위 테스트란?
좋은 단위 테스트는 다음과 같은 특징을 갖는다.

1. 빠르다: 테스트 실행 속도가 느리면 자주 실행하기 어렵다.
2. 독립적이다: 하나의 테스트가 실패해도 다른 테스트에는 영향을 주지 않아야 한다.
3. 반복 가능하다: 환경에 의존하지 않고 언제든 같은 결과를 보장해야 한다.
4. 가독성이 좋다: 테스트 코드는 실제 코드만큼이나 이해하기 쉬워야 한다.
5. 유지보수가 용이하다: 변경 사항이 생겨도 테스트 코드가 쉽게 깨지지 않아야 한다.

## 단위 테스트의 구조

단위 테스트는 일반적으로 AAA(Arrange-Act-Assert) 패턴을 따른다.

- Arrange (준비): 테스트에 필요한 객체를 생성하고 초기 상태를 설정한다.  
- Act (실행): 테스트할 동작을 수행한다.  
- Assert (검증): 기대한 결과가 나오는지 확인한다.  

예를 들어, JUnit을 사용한 테스트 코드를 보면 다음과 같다.

```java
@Test
void addNumbers_ShouldReturnSum() {
    // Arrange
    Calculator calculator = new Calculator();
    
    // Act
    int result = calculator.add(2, 3);
    
    // Assert
    assertEquals(5, result);
}
```

## 깨지기 쉬운 테스트를 피하는 방법

1. 구현 세부 사항에 의존하지 않기
    - 테스트는 메서드 내부 구현이 아닌, 입력과 출력에 집중해야 한다.

2. 한 개념만 테스트하기
    - 하나의 테스트에서 여러 개념을 검증하면 원인을 파악하기 어려워진다.

3. 테스트 데이터를 신중하게 선택하기
    - 의미 없는 숫자 대신, 명확한 의미가 있는 값을 사용하는 것이 좋다.

4. 환경에 의존하지 않기
    -데이터베이스, 네트워크, 파일 시스템에 의존하는 테스트는 단위 테스트가 아니라 통합 테스트에 가깝다.

## 테스트를 유지보수하기 쉽게 만드는 방법

- Given-When-Then 패턴 활용: 테스트의 가독성을 높일 수 있다.
- 의도를 명확하게 표현: 테스트 이름을 직관적으로 작성한다.
- 중복을 최소화: 공통된 설정은 @BeforeEach 또는 헬퍼 메서드로 분리한다.

## 결론

단위 테스트는 단순히 작성하는 것이 중요한 것이 아니라, 올바르게 작성하는 것이 중요하다.  
『클린 코드』에서는 단위 테스트를 효과적으로 작성하는 원칙을 제시하며, 이를 통해 코드 품질을 향상시킬 수 있음을 강조한다.  
좋은 테스트를 유지하는 습관을 들이면, 장기적으로 더 건강한 코드베이스를 만들 수 있을 것이다.

